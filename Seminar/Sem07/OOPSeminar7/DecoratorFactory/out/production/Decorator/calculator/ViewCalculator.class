// Source code is decompiled from a .class file using FernFlower decompiler.
package calculator;

import java.util.Scanner;

public class ViewCalculator {
   private ICalculableFactory calculableFactory;

   public ViewCalculator(ICalculableFactory calculableFactory) {
      this.calculableFactory = calculableFactory;
   }

   public void run() {
      label26:
      while(true) {
         int primaryArg = this.promptInt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u0439 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442: ");
         Calculable calculator = this.calculableFactory.create(primaryArg);

         while(true) {
            while(true) {
               String cmd = this.prompt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 (*, +, =) : ");
               int result;
               if (cmd.equals("*")) {
                  result = this.promptInt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0442\u043e\u0440\u043e\u0439 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442: ");
                  calculator.multi(result);
               } else if (cmd.equals("+")) {
                  result = this.promptInt("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0442\u043e\u0440\u043e\u0439 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442: ");
                  calculator.sum(result);
               } else if (cmd.equals("=")) {
                  result = calculator.getResult();
                  System.out.printf("\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 %d\n", result);
                  cmd = this.prompt("\u0415\u0449\u0435 \u043f\u043e\u0441\u0447\u0438\u0442\u0430\u0442\u044c (Y/N)?");
                  if (cmd.equals("Y")) {
                     continue label26;
                  }

                  return;
               }
            }
         }
      }
   }

   private String prompt(String message) {
      Scanner in = new Scanner(System.in);
      System.out.print(message);
      return in.nextLine();
   }

   private int promptInt(String message) {
      Scanner in = new Scanner(System.in);
      System.out.print(message);
      return Integer.parseInt(in.nextLine());
   }
}
